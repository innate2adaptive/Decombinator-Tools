# Decombinator-Tools

This repository contains scripts that may be helpful when working with the [Decombinator](https://github.com/innate2adaptive/Decombinator) software.

<h3 id="top">Navigation:</h3>

* [Test Data Generator](#test-data-generator)

---

<h1 id="test-data-generator">Test Data Generator</h1>

The automatic test data generator can be used to produce customised FASTQ files to use as test input data for use with the [Decombinator Script](https://github.com/innate2adaptive/Decombinator#decombinator).

Generic TCR alpha and beta chain FASTQ files for Decombinator can be generated by simply running:
```
python test-data-generator.py
```
Separate FASTQ files containing alpha and beta TCR sequences will be saved to a newly created `TestData` directory. Each file will contain 100 FASTQ reads each containing a V and J tag. The direction of these reads by default is in the reverse direction (which is also the default for Decombinator). By default, these sequences will include dummy barcodes (with a default barcode length of 42).

The id of each read in the FASTQ file contains information regarding which chain is present in the read, the direction of the read, whether the read contains one (SingleTag) or two (DualTag) tags, and a read-id.

## Customisability

The test data generator can be provided a number of input arguments to customise the output test data. Information on these arguments can be found be running:
```
python test-data-generator.py -h
```
#### Input Arguments

`-d`   - change the name of the output directory for the test data

`-rl`  - change the read length of the output sequences (before barcoding)

`-n`   - change the total number of output reads per chain

`-v`   - choose whether to produce dual tag or single tag output data

`-mc`  - produces a single output file of mixed alpha and beta chain TCRs

`-nbc` - choose to produce non-barcoded data

`-bl`  - change the length of the attached barcode

`-it`  - provide a percentage value for how many of the reads contain TCR sequences

`-ie`  - provide a percentage value for how many tags contain one "sequencing" error

`-mt`  - provide a percentage value for how many alpha and beta tags will have an overlapping match in single tag mode

`-tf`  - direct the script to the local directory where tag files are stored. Useful for offline work. By default the script will first attempt to download the tags from the [Decombinator-Tags-FASTAs](https://github.com/innate2adaptive/Decombinator-Tags-FASTAs) directory.

`-or`  - change the orientation of the output reads, 'reverse', 'forward', or 'both' (50% forward and 50% reverse)

#### Examples

* To create a file of 250 non-barcoded, mixed alpha and beta chain reads of 160 bp in length, stored in a directory called `MyData` run:
```
python test-data-generator.py -nbc -mc -n 250 -rl 160 -d MyData
```

* To create alpha and beta files for Single Tag Decombinator, in the forward direction, with 40% of sequences containing a sequencing error (1 bp substitution), run:

```
python test-data-generator.py -v s -or forward -ie 40
```
	

